uses Graph, Crt;
var
 d, r, r1, r2, rr, c, x1, y1, x2, y2, x01, y01, k
 : Integer;
 Xasp, Yasp : Word;
 XYasp : Real;
begin
d := detect;
InitGraph (d, r, '');
c := GraphResult;
if c <> Grok then Writeln (GraphErrorMsg(c))
 else
 begin
 X1 := GetMaxX div 2;
 Y1 := GetMaxY div 2;
 GetAspectRatio(Xasp, Yasp); {??????? ????????}
 XYasp := Yasp / Xasp;
 r := round(3 * GetMaxY / 8/XYasp);
 r1 := round(0.9 * r); {??????? ??????? }
 r2 := round(0.95 * r); {???????? ???????}
 Circle(x1, y1, r); {????????? }
 Circle(x1, y1, round(1.02 * r));
 for k := 0 to 59 do
 begin
 if k mod 5=0 then rr := r1 {??????? ??????? }
 else rr := r2; {???????? ???????}
 X01 := X1+Round(rr*sin(2*pi*k/60));
 X2 := X1+Round(r*sin(2*pi*k/60));
 Y01 := Y1-Round(rr*cos(2*pi*k/60)*XYasp);
 Y2 := Y1-Round(r*XYasp*cos(2*pi*k/60));
 Line(X01, Y01, X2, Y2); {???????}
 end;
 SetWRITEMode(XORPut);
 SetLineStyle(Solidln, 0, ThickWidth);
 r := 0; {??????? ????? ? ?????? ????}
 repeat
 for k := 0 to 59 do
 if not KeyPressed then
 begin {?????????? ??????? ???????}
 X2 :=X1+Round(0.85*r1*sin(2*pi*r/60/12));
 Y2 :=Y1-Round(0.85*r1*XYasp*cos(2*pi*r/60/12));
 X01 :=X1+Round(r2*sin(2*pi*k/60));
 Y01 :=Y1-Round(r2*XYasp*cos(2*pi*k/60));
 {?????????? ???????? ???????}
 Line(X1, Y1, X2, Y2);
 Line(X1, Y1, X01, Y01);
 Delay(1000);
 Line(X1, Y1, X2, Y2);
 Line(X1, Y1, X01, Y01); {?????? ?????? ???????}
 inc(r);
 if r=12*60 then r := 0;
 end;
 until KeyPressed;
 if Readkey=#0 then k := Ord(Readkey);
 {???????? ????? ??????????}
 CloseGraph;
 end
end.
